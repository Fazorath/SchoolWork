Module 8 Assignment
---------------------------------------------------
1. Average grade over all sections and all students

SELECT
    AVG(grade) AS averageGrade
FROM
    gradestbl
JOIN sectionstbl ON sectionfk = sectionid;

Records = 1
----------------------------------------------------
2. A list of students (firstname, lastname), who earned a section grade 
that is 1 point higher than the average grade. If the average grade is 2
then this query wants you to find all students who earned a 3 or higher. 
Calculate this average grade in the query.

SELECT DISTINCT
    firstname,
    lastname
FROM
    studentstbl
JOIN gradestbl ON studentid = studentfk
WHERE
    grade >(
    SELECT
        AVG(grade) + 1
    FROM
        gradestbl
);
Records = 4
-----------------------------------------------------
3.The total number of credit hours generated by department
SELECT
    department,
    SUM(credit) AS CreditsEarned
FROM
    coursestbl
JOIN departmentstbl ON departmentfk = departmentid
GROUP BY
    department;
	
Records = 11
----------------------------------------------------
4. The top 5 courses that had the most sections
SELECT
    courseid,
    COUNT(sectionid) AS Sections,
    CONCAT(department, ' ', coursenumber) AS NAME
FROM
    coursestbl
JOIN sectionstbl ON courseid = coursefk
JOIN departmentstbl ON departmentfk = departmentid
GROUP BY
    courseid,
    department,
    coursenumber
ORDER BY
    Sections
DESC
LIMIT 5;

Records = 5
---------------------------------------------------
5. The average grade by course
SELECT
    CONCAT(department, ' ', coursenumber) AS CourseName,
    AVG(grade) AS AverageGrade
FROM
    gradestbl
JOIN sectionstbl ON sectionfk = sectionid
JOIN coursestbl ON coursefk = courseid
JOIN departmentstbl ON departmentfk = departmentid
GROUP BY
    CourseName
ORDER BY
    AverageGrade
DESC
    ;

Records = 7
----------------------------------------------------
6. A list of all students who earned an 4 in a course and had an average grade that was 2 or less
SELECT DISTINCT
    firstname,
    lastname
FROM
    studentstbl 
JOIN gradestbl ON
    studentid = studentfk
JOIN sectionstbl ON sectionfk = sectionid
JOIN(
    SELECT studentfk,
        AVG(grade) AS AvgGrade
    FROM
        gradestbl
    GROUP BY
        studentfk
) AS AvgGrade
ON
    studentid = AvgGrade.studentfk
WHERE
    grade = 4 AND AvgGrade.AvgGrade <= 2;

Records = 0
-------------------------------------------------------
7. Which instructor awarded the highest average grade
SELECT
    instructorid,
    instfirstname,
    instlastname,
    AVG(grade) AS AvgGrade
FROM
    instructorstbl
JOIN sectionstbl ON instructorid = instructorfk
JOIN gradestbl ON sectionid = sectionfk
GROUP BY
    instructorid,
    instfirstname,
    instlastname
ORDER BY
    AvgGrade
DESC
LIMIT 1;

Records = 1
-------------------------------------------------------
